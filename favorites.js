import"./assets/popup_menu-fsAcIMqy.js";import"./assets/vendor-CqPP30cW.js";const k="../img/icons.svg";function h(e,n=""){return`<svg class="icon ${n}" aria-hidden="true" focusable="false">
    <use href="${k}#icon-${e}"></use>
  </svg>`}console.log("✅ favorites-filter.js çalışıyor.");function $(){const n=document.querySelector(".favorites-filter")?.querySelector(".container"),a=document.querySelector(".category-wrapper");if(!n||!a)return;const i=window.innerWidth,l=n.offsetWidth,g=(i-l)/2;let t=20;i>=768&&i<1280?t=32:i>=1280&&(t=100),a.style.paddingLeft=`${Math.max(0,g+t)}px`}window.addEventListener("load",$);window.addEventListener("resize",$);function w(){try{const e=JSON.parse(localStorage.getItem("favorites"));return Array.isArray(e)?e:[]}catch{return[]}}function T(e){localStorage.setItem("favorites",JSON.stringify(e||[]))}function S(e){return e?._id||e?.id}const M=e=>(e??"").toString().replace(/[&<>"']/g,n=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[n]);function H(e=0){const n=Math.max(0,Math.min(5,Math.floor(Number(e)||0))),a=5-n,i=Array.from({length:n}).map(()=>h("Star","star-icon")).join(""),l=Array.from({length:a}).map(()=>h("Star-empty","star-icon empty")).join("");return`${i}${l}`}function I(){const e=window.innerWidth;return e<768?9:(e<1280,12)}function N(e,n){return n<=2?[1,n]:e>=n-1?[n-1,n]:e<=1?[1,2]:[e,e+1]}const r={currentPage:1,currentCategory:"All",recipesPerPage:I(),isLoading:!1};window.addEventListener("resize",()=>{r.recipesPerPage=I(),L()});function q(e){return[...new Set((e||[]).map(n=>n?.category?.name||n?.category||"Uncategorized"))]}const u=document.getElementById("favorites-list"),v=document.getElementById("empty-message"),E=document.getElementById("category-list"),p=document.getElementById("all-categories-btn"),c=document.querySelector(".category-wrapper");let o=null;function B(){return o||(o=document.createElement("div"),o.id="loading-message",o.textContent="Loading…",o.style.textAlign="center",o.style.margin="24px auto",o.style.fontWeight="600",o.style.opacity="0.8",u?.insertAdjacentElement("beforebegin",o)),o}function R(){r.isLoading=!0,B().style.display="block",v?.classList.add("hidden");const e=P();e&&(e.style.display="none"),u&&(u.innerHTML=""),c&&(c.style.display="none")}function C(){r.isLoading=!1,o&&(o.style.display="none")}function P(){let e=document.getElementById("pagination-container");return e||(e=document.querySelector(".pagination")),e}function x(){return u&&v&&E&&p}function W(e){if(!x())return;if(!e||e.length===0){c&&(c.style.display="none"),E.innerHTML="",p&&p.classList.remove("active");return}else c&&(c.style.display="");E.innerHTML="";const n=()=>{document.querySelectorAll(".category").forEach(a=>a.classList.remove("active")),r.currentCategory==="All"?p.classList.add("active"):p.classList.remove("active")};p.onclick=()=>{r.currentCategory="All",r.currentPage=1,n(),y()},q(e).forEach(a=>{const i=document.createElement("button");i.className="category",i.textContent=a,a===r.currentCategory&&i.classList.add("active"),i.addEventListener("click",()=>{r.currentCategory=a,r.currentPage=1,n(),i.classList.add("active"),y()}),E.appendChild(i)}),n()}function j(e){const n=P();if(!n)return;if(n.innerHTML="",!Number.isFinite(e)||e<=1){n.style.display="none";return}n.style.display="flex";const a=t=>h(t?"pg-left-icon-gray":"pg-left-icon"),i=t=>h(t?"pg-right-icon-gray":"pg-right-icon"),l=(t,s,m=!1,b="",f=null)=>{const d=document.createElement("button");d.className=b,f?d.innerHTML=f:d.textContent=t,m&&(d.disabled=!0),!m&&s&&d.addEventListener("click",()=>{r.currentPage=s,y()}),n.appendChild(d)};l("",1,r.currentPage===1,"page-icon",`<span class="double-icon">${a(r.currentPage===1)}${a(r.currentPage===1)}</span>`),l("",r.currentPage-1,r.currentPage===1,"page-icon",a(r.currentPage===1));const g=N(r.currentPage,e);if(g[0]>1){const t=document.createElement("button");t.textContent="...",t.className="dots",t.disabled=!0,n.appendChild(t)}for(let t=g[0];t<=g[1];t++){const s=document.createElement("button");s.textContent=t,t===r.currentPage&&s.classList.add("active"),s.addEventListener("click",()=>{r.currentPage=t,y()}),n.appendChild(s)}if(g[1]<e){const t=document.createElement("button");t.textContent="...",t.className="dots",t.disabled=!0,n.appendChild(t)}l("",r.currentPage+1,r.currentPage===e,"page-icon",i(r.currentPage===e)),l("",e,r.currentPage===e,"page-icon",`<span class="double-icon">${i(r.currentPage===e)}${i(r.currentPage===e)}</span>`)}function y(){if(!x())return;if(r.isLoading){const t=P();t&&(t.style.display="none"),u.innerHTML="",v.classList.add("hidden");return}const e=w(),n=P();if(!e||e.length===0){u.innerHTML="",v.classList.remove("hidden"),n&&(n.style.display="none"),c&&(c.style.display="none");return}v.classList.add("hidden");const a=r.currentCategory==="All"?e:e.filter(t=>(t?.category?.name||t?.category||"Uncategorized")===r.currentCategory);if(a.length===0){u.innerHTML='<p style="text-align:center;">No recipes in this category.</p>',n&&(n.style.display="none"),c&&(c.style.display="");return}const i=Math.max(1,Math.ceil(a.length/r.recipesPerPage));r.currentPage>i&&(r.currentPage=i);const l=(r.currentPage-1)*r.recipesPerPage,g=a.slice(l,l+r.recipesPerPage);u.innerHTML="",g.forEach(t=>{const s=document.createElement("div");s.className="recipe-card";const m=t.preview||t.thumb||t.image_url||"";s.style.backgroundImage=m?`url('${m}')`:"none",s.innerHTML=`
      <div class="recipe-overlay"></div>
      <div class="heart" data-id="${S(t)??""}">
        ${h("heart")}
      </div>
      <div class="recipe-card-content">
        <h4>${M(t.title)}</h4>
        <p>${M(t.description||"Açıklama bulunamadı.")}</p>
        <div class="recipe-meta">
          <span class="star-group">
            ${Number(t.rating??0).toFixed(2)}
            <span class="star-icon">${H(t.rating)}</span>
          </span>
          <button class="secondary-button see-recipe-btn">See recipe</button>
        </div>
      </div>
    `,s.querySelector(".heart").addEventListener("click",()=>{const b=String(S(t)),f=w(),d=f.findIndex(A=>String(S(A))===b);d!==-1&&(f.splice(d,1),T(f),window.dispatchEvent(new Event("favorites:updated"))),L()}),s.querySelector(".see-recipe-btn").addEventListener("click",()=>{typeof window.openPopup=="function"?window.openPopup(t):console.error("❌ window.openPopup bulunamadı. popup_menu.js yüklendi mi?")}),u.appendChild(s)}),c&&(c.style.display=""),j(i)}function L(){const e=w();W(e),y()}window.addEventListener("load",()=>{if(!x()){console.warn("⚠️ Gerekli DOM elemanları bulunamadı.");return}R(),y();let e=0;const n=setInterval(()=>{const a=w().length>0;e++,(a||e>10)&&(clearInterval(n),C(),L())},500)});window.addEventListener("storage",e=>{e.key==="favorites"&&(C(),L())});window.addEventListener("favorites:updated",()=>{C(),L()});
//# sourceMappingURL=favorites.js.map
