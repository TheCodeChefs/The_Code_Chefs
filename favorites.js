import"./assets/popup_menu-zI3Hk13D.js";const T="../img/icons.svg";function L(e,n=""){return`<svg class="icon ${n}" aria-hidden="true" focusable="false">
    <use href="${T}#icon-${e}"></use>
  </svg>`}function $(){const n=document.querySelector(".favorites-filter")?.querySelector(".container"),a=document.querySelector(".category-wrapper");if(!n||!a)return;const i=window.innerWidth,o=n.offsetWidth,d=(i-o)/2;let t=20;i>=768&&i<1280?t=32:i>=1280&&(t=100),a.style.paddingLeft=`${Math.max(0,d+t)}px`}window.addEventListener("load",$);window.addEventListener("resize",$);const E="BroadcastChannel"in window?new BroadcastChannel("favorites"):null;function B(){window.dispatchEvent(new Event("favorites:updated")),E&&E.postMessage({type:"favorites:updated",at:Date.now()});try{typeof window.renderAll=="function"&&window.renderAll()}catch{}}function P(){try{const e=JSON.parse(localStorage.getItem("favorites"));return Array.isArray(e)?e:[]}catch{return[]}}function H(e){localStorage.setItem("favorites",JSON.stringify(e||[])),B()}function M(e){return e?._id||e?.id}const A=e=>(e??"").toString().replace(/[&<>"']/g,n=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[n]);function N(e=0,{max:n=5,fillEmpty:a=!1}={}){const i=Math.max(0,Math.min(n,Math.floor(Number(e)||0))),o=Array.from({length:i}).map(()=>L("Star","star-icon")).join("");if(!a)return o;const d=Math.max(0,n-i),t=Array.from({length:d}).map(()=>L("Star-empty","star-icon empty")).join("");return`${o}${t}`}function I(){const e=window.innerWidth;return e<768?9:(e<1280,12)}function q(e,n){return n<=2?[1,n]:e>=n-1?[n-1,n]:e<=1?[1,2]:[e,e+1]}const r={currentPage:1,currentCategory:"All",recipesPerPage:I(),isLoading:!1};window.addEventListener("resize",()=>{r.recipesPerPage=I(),m()});function R(e){return[...new Set((e||[]).map(n=>n?.category?.name||n?.category||"Uncategorized"))]}const g=document.getElementById("favorites-list"),h=document.getElementById("empty-message"),w=document.getElementById("category-list"),p=document.getElementById("all-categories-btn"),l=document.querySelector(".category-wrapper");let c=null;function W(){return c||(c=document.createElement("div"),c.id="loading-message",c.textContent="Loading…",c.style.textAlign="center",c.style.margin="24px auto",c.style.fontWeight="600",c.style.opacity="0.8",g?.insertAdjacentElement("beforebegin",c)),c}function F(){r.isLoading=!0,W().style.display="block",h?.classList.add("hidden");const e=b();e&&(e.style.display="none"),g&&(g.innerHTML=""),l&&(l.style.display="none")}function C(){r.isLoading=!1,c&&(c.style.display="none")}function b(){let e=document.getElementById("pagination-container");return e||(e=document.querySelector(".pagination")),e}function x(){return g&&h&&w&&p}function j(e){if(!x())return;if(!e||e.length===0){l&&(l.style.display="none"),w.innerHTML="",p&&p.classList.remove("active");return}else l&&(l.style.display="");w.innerHTML="";const n=()=>{document.querySelectorAll(".category").forEach(a=>a.classList.remove("active")),r.currentCategory==="All"?p.classList.add("active"):p.classList.remove("active")};p.onclick=()=>{r.currentCategory="All",r.currentPage=1,n(),y()},R(e).forEach(a=>{const i=document.createElement("button");i.className="category",i.textContent=a,a===r.currentCategory&&i.classList.add("active"),i.addEventListener("click",()=>{r.currentCategory=a,r.currentPage=1,n(),i.classList.add("active"),y()}),w.appendChild(i)}),n()}function z(e){const n=b();if(!n)return;if(n.innerHTML="",!Number.isFinite(e)||e<=1){n.style.display="none";return}n.style.display="flex";const a=t=>L(t?"pg-left-icon-gray":"pg-left-icon"),i=t=>L(t?"pg-right-icon-gray":"pg-right-icon"),o=(t,s,v=!1,S="",f=null)=>{const u=document.createElement("button");u.className=S,f?u.innerHTML=f:u.textContent=t,v&&(u.disabled=!0),!v&&s&&u.addEventListener("click",()=>{r.currentPage=s,y()}),n.appendChild(u)};o("",1,r.currentPage===1,"page-icon",`<span class="double-icon">${a(r.currentPage===1)}${a(r.currentPage===1)}</span>`),o("",r.currentPage-1,r.currentPage===1,"page-icon",a(r.currentPage===1));const d=q(r.currentPage,e);if(d[0]>1){const t=document.createElement("button");t.textContent="...",t.className="dots",t.disabled=!0,n.appendChild(t)}for(let t=d[0];t<=d[1];t++){const s=document.createElement("button");s.textContent=t,t===r.currentPage&&s.classList.add("active"),s.addEventListener("click",()=>{r.currentPage=t,y()}),n.appendChild(s)}if(d[1]<e){const t=document.createElement("button");t.textContent="...",t.className="dots",t.disabled=!0,n.appendChild(t)}o("",r.currentPage+1,r.currentPage===e,"page-icon",i(r.currentPage===e)),o("",e,r.currentPage===e,"page-icon",`<span class="double-icon">${i(r.currentPage===e)}${i(r.currentPage===e)}</span>`)}function y(){if(!x())return;if(r.isLoading){const t=b();t&&(t.style.display="none"),g.innerHTML="",h.classList.add("hidden");return}const e=P(),n=b();if(!e||e.length===0){g.innerHTML="",h.classList.remove("hidden"),n&&(n.style.display="none"),l&&(l.style.display="none");return}h.classList.add("hidden");const a=r.currentCategory==="All"?e:e.filter(t=>(t?.category?.name||t?.category||"Uncategorized")===r.currentCategory);if(a.length===0){g.innerHTML='<p style="text-align:center;">No recipes in this category.</p>',n&&(n.style.display="none"),l&&(l.style.display="");return}const i=Math.max(1,Math.ceil(a.length/r.recipesPerPage));r.currentPage>i&&(r.currentPage=i);const o=(r.currentPage-1)*r.recipesPerPage,d=a.slice(o,o+r.recipesPerPage);g.innerHTML="",d.forEach(t=>{const s=document.createElement("div");s.className="recipe-card";const v=t.preview||t.thumb||t.image_url||"";s.style.backgroundImage=v?`url('${v}')`:"none",s.innerHTML=`
      <div class="recipe-overlay"></div>
      <div class="heart" data-id="${M(t)??""}">
        ${L("heart")}
      </div>
      <div class="recipe-card-content">
        <h4>${A(t.title)}</h4>
        <p>${A(t.description||"Açıklama bulunamadı.")}</p>
        <div class="recipe-meta">
          <span class="star-group">
            ${Number(t.rating??0).toFixed(2)}
            <span class="star-icon">
              ${N(t.rating)} 
            </span>
          </span>
          <button class="secondary-button see-recipe-btn">See recipe</button>
        </div>
      </div>
    `,s.querySelector(".heart").addEventListener("click",()=>{const S=String(M(t)),f=P(),u=f.findIndex(k=>String(M(k))===S);u!==-1&&(f.splice(u,1),H(f))}),s.querySelector(".see-recipe-btn").addEventListener("click",()=>{typeof window.openPopup=="function"?window.openPopup(t):console.error("❌ window.openPopup bulunamadı. popup_menu.js yüklendi mi?")}),g.appendChild(s)}),l&&(l.style.display=""),z(i)}function m(){const e=P();j(e),y()}window.renderAll=m;window.addEventListener("load",()=>{if(!x()){console.warn("⚠️ Gerekli DOM elemanları bulunamadı.");return}F(),y();let e=0;const n=setInterval(()=>{const a=P().length>0;e++,(a||e>10)&&(clearInterval(n),C(),m())},500)});window.addEventListener("storage",e=>{e.key==="favorites"&&(C(),m())});window.addEventListener("favorites:updated",()=>{C(),m()});E&&(E.onmessage=e=>{e.data?.type==="favorites:updated"&&(C(),m())});
//# sourceMappingURL=favorites.js.map
