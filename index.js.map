{"version":3,"file":"index.js","sources":["../src/js/home-hero.js","../src/js/home-filter.js","../src/js/popup_menu.js"],"sourcesContent":["import Swiper from 'swiper/bundle';\nimport 'swiper/css/bundle';\n\nconst swiper = new Swiper('.swiper', {\n  slidesPerView: 'auto',\n  centeredSlides: false,\n  spaceBetween: 16,\n  pagination: {\n    el: '.swiper-pagination',\n    clickable: true,\n  },\n});\n","import axios from 'axios';\n\nconst API_BASE = 'https://tasty-treats-backend.p.goit.global/api';\n\nconst categoryListEl = document.getElementById('category-list');\nconst allCategoriesBtn = document.querySelector('.all-categories-button');\nconst searchInput = document.getElementById('search-input');\nconst recipeGridEl = document.getElementById('recipe-grid');\nconst emptyRecipeGridEl = document.getElementById('empty-recipe-grid');\n\nconst resetBtn = document.getElementById('reset-button');\n\nconst timeSelect = document.getElementById('time-select');\nconst areaSelect = document.getElementById('area-select');\nconst ingredientSelect = document.getElementById('ingredient-select');\nconst paginationEl = document.getElementById('pagination');\n\nlet selectedCategory = null;\nlet searchQuery = '';\nlet selectedTime = '';\nlet selectedArea = '';\nlet selectedIngredient = '';\nlet currentPage = 1;\nconst recipesPerPage = 9;\n\n// Favorileri localStorage destekli Set ile yönetiyoruz\nlet favorites = [];\n\nfunction isInFavorites(id) {\n  return favorites.some(item => item._id === id);\n}\n\nfunction saveFavoritesToLocalStorage() {\n  localStorage.setItem('favorites', JSON.stringify(favorites));\n}\n\nfunction loadFavoritesFromLocalStorage() {\n  const favs = localStorage.getItem('favorites');\n  if (favs) {\n    try {\n      const favArray = JSON.parse(favs);\n      favArray.forEach(item => favorites.push(item));\n    } catch {\n      // Hatalı veri varsa temizle\n      localStorage.removeItem('favorites');\n    }\n  }\n}\n\nasync function loadCategories() {\n  try {\n    const res = await axios.get(`${API_BASE}/categories`);\n    const categories = res.data;\n    categoryListEl.innerHTML = '';\n\n    categories.forEach(cat => {\n      const li = document.createElement('li');\n      const btn = document.createElement('button');\n      btn.textContent = cat.name;\n      btn.classList.add('category-btn');\n      btn.addEventListener('click', () => {\n        selectedCategory = cat.name;\n        currentPage = 1;\n        updateCategoryActive();\n        fetchAndRenderRecipes();\n      });\n      li.appendChild(btn);\n      categoryListEl.appendChild(li);\n    });\n  } catch (err) {\n    console.error('Kategori yüklenirken hata:', err);\n  }\n}\n\nfunction updateCategoryActive() {\n  allCategoriesBtn.classList.remove('active');\n  categoryListEl\n    .querySelectorAll('li')\n    .forEach(li => li.classList.remove('active'));\n\n  if (selectedCategory === null) {\n    allCategoriesBtn.classList.add('active');\n  } else {\n    categoryListEl.querySelectorAll('li').forEach(li => {\n      const btn = li.querySelector('button');\n      if (btn.textContent === selectedCategory) {\n        li.classList.add('active');\n      }\n    });\n  }\n}\n\nallCategoriesBtn.addEventListener('click', () => {\n  selectedCategory = null;\n  currentPage = 1;\n  updateCategoryActive();\n  fetchAndRenderRecipes();\n});\n\nsearchInput.addEventListener('input', () => {\n  searchQuery = searchInput.value.trim();\n  currentPage = 1;\n  fetchAndRenderRecipes();\n});\n\nresetBtn.addEventListener('click', () => {\n  selectedCategory = null;\n  searchQuery = '';\n  selectedTime = '';\n  selectedArea = '';\n  selectedIngredient = '';\n  searchInput.value = '';\n  timeSelect.value = '';\n  areaSelect.value = '';\n  ingredientSelect.value = '';\n  currentPage = 1;\n  updateCategoryActive();\n  fetchAndRenderRecipes();\n});\n\ntimeSelect.addEventListener('change', () => {\n  selectedTime = timeSelect.value;\n  currentPage = 1;\n  fetchAndRenderRecipes();\n});\n\nareaSelect.addEventListener('change', () => {\n  selectedArea = areaSelect.value;\n  currentPage = 1;\n  fetchAndRenderRecipes();\n});\n\ningredientSelect.addEventListener('change', () => {\n  selectedIngredient = ingredientSelect.value;\n  currentPage = 1;\n  fetchAndRenderRecipes();\n});\n\nfunction fillTimeOptions() {\n  const times = [15, 30, 45, 60, 90, 120];\n  timeSelect.innerHTML = `<option value=\"\">All times</option>`;\n  times.forEach(t => {\n    const option = document.createElement('option');\n    option.value = t;\n    option.textContent = `${t} minutes`;\n    timeSelect.appendChild(option);\n  });\n}\n\nasync function fillAreaOptions() {\n  try {\n    const res = await axios.get(`${API_BASE}/areas`);\n    const areas = res.data;\n    areaSelect.innerHTML = `<option value=\"\">All areas</option>`;\n    areas.forEach(area => {\n      const option = document.createElement('option');\n      option.value = area.name;\n      option.textContent = area.name;\n      areaSelect.appendChild(option);\n    });\n  } catch (err) {\n    console.error('Area options yüklenirken hata:', err);\n  }\n}\n\nasync function fillIngredientOptions() {\n  try {\n    const res = await axios.get(`${API_BASE}/ingredients`);\n    const ingredients = res.data;\n    ingredientSelect.innerHTML = `<option value=\"\">All ingredients</option>`;\n    ingredients.forEach(ing => {\n      const option = document.createElement('option');\n      option.value = ing._id;\n      option.textContent = ing.name;\n      ingredientSelect.appendChild(option);\n    });\n  } catch (err) {\n    console.error('Ingredient options yüklenirken hata:', err);\n  }\n}\n\nasync function fetchAndRenderRecipes(page = 1) {\n  currentPage = page;\n  recipeGridEl.innerHTML = 'Loading...';\n\n  try {\n    const params = {\n      page: currentPage,\n      limit: recipesPerPage,\n    };\n    if (selectedCategory) params.category = selectedCategory;\n    if (searchQuery) params.title = searchQuery;\n    if (selectedTime) params.time = selectedTime;\n    if (selectedArea) params.area = selectedArea;\n    if (selectedIngredient) params.ingredient = selectedIngredient;\n\n    const res = await axios.get(`${API_BASE}/recipes`, { params });\n    const recipes = res.data.results || [];\n    const totalPages = res.data.totalPages || 1;\n\n    if (!recipes.length) {\n      recipeGridEl.innerHTML = '';\n      emptyRecipeGridEl.innerHTML = `<svg\n        class=\"icon-empty-recipes\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 97 83\"\n        width=\"97\"\n        height=\"83\"\n      >\n        <use href=\"../svg/symbol-defs.svg#icon-empty-recipes\"></use>\n        </svg>\n        <p>No recipes found.</p>`;\n      paginationEl.innerHTML = '';\n      return;\n    }\n    emptyRecipeGridEl.innerHTML = '';\n    renderRecipes(recipes);\n    renderPagination(totalPages, currentPage);\n  } catch (err) {\n    console.error('Tarifler yüklenirken hata:', err);\n    recipeGridEl.innerHTML = '<p>Error loading recipes.</p>';\n    paginationEl.innerHTML = '';\n  }\n}\n\nfunction renderRating(rating) {\n  let str = '';\n  for (let i = 0; i < 5; i++) {\n    if (i < parseInt(rating)) {\n      str += ` <svg\n        class=\"icon-yellow-star\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n      >\n        <use href=\"../svg/symbol-defs.svg#icon-yellow-star\"></use>\n        </svg>`;\n    } else {\n      str += ` <svg\n        class=\"icon-empty-star\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n      >\n        <use href=\"../svg/symbol-defs.svg#icon-empty-star\"></use>\n        </svg>`;\n    }\n  }\n  return str;\n}\n\nfunction renderFavoriteIcon(id) {\n  const isFavorite = isInFavorites(id);\n  return isFavorite\n    ? `<svg\n            class=\"icon-white-heart\"\n            viewBox=\"0 0 24 24\"\n        >\n            <use href=\"../svg/symbol-defs.svg#icon-white-heart\"></use>\n        </svg>`\n    : `<svg\n            class=\"icon-heart\"\n            viewBox=\"0 0 24 24\"\n        >\n            <use href=\"../svg/symbol-defs.svg#icon-heart\"></use>\n        </svg>`;\n}\n\nfunction getRecipeIdSafe(r) {\n  return r?._id || r?.id;\n}\n\nfunction renderRecipes(recipes) {\n  recipeGridEl.innerHTML = '';\n  recipes.forEach(recipe => {\n    const card = document.createElement('div');\n    card.className = 'recipe-card';\n\n    const imageUrl =\n      recipe.thumb || 'https://via.placeholder.com/280x180?text=No+Image';\n    card.style.backgroundImage = `linear-gradient(0.94deg, rgba(5, 5, 5, 0.6) 4.82%, rgba(5, 5, 5, 0.5) 18.72%), url(${imageUrl})`;\n\n    const ratingValue = parseFloat(recipe.rating).toFixed(1);\n\n    card.innerHTML = `\n     <button id='favorite-button-${\n       recipe._id\n     }' class=\"favorite-btn\">${renderFavoriteIcon(recipe._id)}</button>\n     \n      <div class=\"recipe-card-bottom\">\n        <div class=\"recipe-card-desc\">\n            <h3>${recipe.title}</h3>\n            <p>${recipe.description || ''}</p>\n        </div>\n     \n        <div class=\"recipe-card-button\">\n            <div class=\"stars\">\n                <div class=\"floatCount\">\n                ${ratingValue}\n                </div>\n                ${renderRating(ratingValue)}\n            </div>\n            <button class=\"see-recipe-btn\">See Recipe</button>\n       </div>\n      </div>\n    `;\n\n    card.querySelector('.favorite-btn').addEventListener('click', () => {\n      toggleFavorite(recipe);\n    });\n\n    // Popup açma\n    card.querySelector('.see-recipe-btn').addEventListener('click', () => {\n      const id = getRecipeIdSafe(recipe);\n      if (typeof window.openPopup === 'function') {\n        window.openPopup(id || recipe);\n      } else {\n        console.error('⚠️ openPopup fonksiyonu tanımlı değil!');\n      }\n    });\n\n    recipeGridEl.appendChild(card);\n  });\n}\n\nexport function toggleFavorite(recipe, byPassLocalSave = false) {\n  if (isInFavorites(recipe._id)) {\n    favorites = favorites.filter(item => item._id !== recipe._id);\n  } else {\n    favorites.push(recipe);\n  }\n\n  const favoriteButton = document.getElementById(\n    `favorite-button-${recipe._id}`\n  );\n\n  if (favoriteButton) {\n    favoriteButton.innerHTML = renderFavoriteIcon(recipe._id);\n  }\n\n  !byPassLocalSave && saveFavoritesToLocalStorage();\n}\n\nfunction renderPagination(totalPages, currentPage) {\n  paginationEl.innerHTML = '';\n\n  const createBtn = (\n    text,\n    page,\n    disabled = false,\n    active = false,\n    className = ''\n  ) => {\n    const btn = document.createElement('button');\n    btn.innerHTML = text;\n    btn.className = className;\n    if (active) btn.classList.add('active');\n    if (disabled) btn.classList.add('disabled');\n    btn.disabled = disabled;\n    btn.addEventListener('click', () => {\n      if (!disabled) fetchAndRenderRecipes(page);\n    });\n    return btn;\n  };\n\n  paginationEl.appendChild(\n    createBtn(\n      `<svg\n            class=\"icon-left-arrow-1 double\"\n            viewBox=\"0 0 48 48\"\n        >\n            <use href=\"../svg/symbol-defs.svg#icon-left-arrow-1\" transform=\"translate(-7, 0)\"></use>\n            <use href=\"../svg/symbol-defs.svg#icon-left-arrow-1\" transform=\"translate(20, 0)\"></use>\n        </svg>`,\n      1,\n      currentPage === 1,\n      false,\n      'page-arrow-icon'\n    )\n  );\n  paginationEl.appendChild(\n    createBtn(\n      `<svg\n            class=\"icon-left-arrow-1\"\n            viewBox=\"0 0 24 24\"\n        >\n            <use href=\"../svg/symbol-defs.svg#icon-left-arrow-1\"></use>\n        </svg>`,\n      currentPage - 1,\n      currentPage === 1,\n      false,\n      'page-arrow-icon'\n    )\n  );\n\n  for (let i = 1; i <= totalPages; i++) {\n    if (i === 1 || i === totalPages || Math.abs(currentPage - i) <= 1) {\n      paginationEl.appendChild(createBtn(i, i, false, currentPage === i));\n    } else if (\n      (i === 2 && currentPage > 3) ||\n      (i === totalPages - 1 && currentPage < totalPages - 2)\n    ) {\n      const dots = document.createElement('span');\n      dots.textContent = '...';\n      dots.classList.add('dots');\n      paginationEl.appendChild(dots);\n    }\n  }\n\n  paginationEl.appendChild(\n    createBtn(\n      `<svg\n            class=\"icon-right-arrow-1\"\n            viewBox=\"0 0 24 24\"\n        >\n            <use href=\"../svg/symbol-defs.svg#icon-right-arrow-1\"></use>\n        </svg>`,\n      currentPage + 1,\n      currentPage === totalPages,\n      false,\n      'page-arrow-icon'\n    )\n  );\n  paginationEl.appendChild(\n    createBtn(\n      `<span><svg\n            class=\"icon-right-arrow-1 double\"\n            viewBox=\"0 0 48 48\"\n        >\n            <use href=\"../svg/symbol-defs.svg#icon-right-arrow-1\" transform=\"translate(-7, 0)\"></use>\n            <use href=\"../svg/symbol-defs.svg#icon-right-arrow-1\" transform=\"translate(20, 0)\"></use>\n        </svg></span>`,\n      totalPages,\n      currentPage === totalPages,\n      false,\n      'page-arrow-icon'\n    )\n  );\n}\n\nasync function loadPopularRecipes() {\n  try {\n    const response = await axios.get(`${API_BASE}/recipes/popular`);\n    const recipes = response.data;\n    const popularList = document.querySelector('#popular-list');\n    popularList.innerHTML = '';\n\n    recipes.forEach(recipe => {\n      const li = document.createElement('li');\n      li.classList.add('popular-card');\n\n      const image =\n        recipe.preview ||\n        recipe.thumb ||\n        'https://via.placeholder.com/100x70?text=No+Image';\n      const title = recipe.title || 'Untitled';\n      const description =\n        recipe.description || recipe.instructions || 'No description available';\n\n      li.className = 'popular-card';\n      li.innerHTML = `\n  <img src=\"${image}\" alt=\"${title}\" />\n  <div class=\"popular-card-info\">\n    <h4 class=\"popular-card-title\" >${title}</h4>\n    <p class=\"popular-card-desc\">${description}</p>\n  </div>\n`;\n\n      li.addEventListener('click', () => {\n        const id = getRecipeIdSafe(recipe);\n        if (typeof window.openPopup === 'function') {\n          window.openPopup(id || recipe);\n        } else {\n          console.error('⚠️ openPopup fonksiyonu tanımlı değil!');\n        }\n      });\n\n      popularList.appendChild(li);\n    });\n  } catch (error) {\n    console.error('Popüler tarifler alınamadı:', error);\n  }\n}\n\nwindow.addEventListener('DOMContentLoaded', async () => {\n  loadFavoritesFromLocalStorage();\n\n  selectedCategory = null;\n  selectedTime = '';\n  selectedArea = '';\n  selectedIngredient = '';\n  updateCategoryActive();\n  await loadCategories();\n  fillTimeOptions();\n  await fillAreaOptions();\n  await fillIngredientOptions();\n  await fetchAndRenderRecipes();\n  await loadPopularRecipes();\n});\n","// popup_menu.js — API + YouTube + ingredients map + rating modal (half-stars + diagnostic sending)\nconsole.log('✅ popup_menu.js yüklendi');\nimport { toggleFavorite } from './home-filter.js';\n\n(function () {\n  const API_ROOT = 'https://tasty-treats-backend.p.goit.global/api';\n\n  /* ========== LocalStorage (favorites) ========== */\n  const FAV_KEY = 'favorites';\n  const getFavs = () => {\n    try {\n      return JSON.parse(localStorage.getItem(FAV_KEY) || '[]');\n    } catch {\n      return [];\n    }\n  };\n  const setFavs = list => localStorage.setItem(FAV_KEY, JSON.stringify(list));\n  const inFavs = id => getFavs().some(r => r && (r._id === id || r.id === id));\n\n  /* ========== Cache & fetch helpers ========== */\n  const cache = { ingredientsMap: null, recipes: new Map() };\n  const fetchJSON = async url => {\n    const r = await fetch(url, { cache: 'no-store' });\n    if (!r.ok) throw new Error(`${r.status} ${r.statusText}`);\n    return r.json();\n  };\n\n  async function getIngredientsMap() {\n    if (cache.ingredientsMap) return cache.ingredientsMap;\n    const list = await fetchJSON(`${API_ROOT}/ingredients`);\n    const map = new Map();\n    (list || []).forEach(it => {\n      const id = it._id || it.id;\n      const name = it.ttl || it.title || it.name || it.ingredient || '';\n      map.set(id, { id, name });\n    });\n    cache.ingredientsMap = map;\n    return map;\n  }\n\n  async function getRecipeDetail(id) {\n    if (cache.recipes.has(id)) return cache.recipes.get(id);\n    const data = await fetchJSON(`${API_ROOT}/recipes/${id}`);\n    cache.recipes.set(id, data);\n    return data;\n  }\n\n  /* ========== Utils ========== */\n  const esc = s =>\n    (s ?? '').toString().replace(\n      /[&<>\"']/g,\n      m =>\n        ({\n          '&': '&amp;',\n          '<': '&lt;',\n          '>': '&gt;',\n          '\"': '&quot;',\n          \"'\": '&#39;',\n        }[m])\n    );\n  const starFilled = `<svg class=\"star\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"/></svg>`;\n  const starEmpty = `<svg class=\"star empty\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.64-7.03L22 9.24zm-10 6.11l-3.76 2.27 1-4.28L5.5 10.5l4.38-.38L12 6.1l2.12 4.02 4.38.38-3.74 3.84 1 4.28L12 15.35z\"/></svg>`;\n  const renderStars = (r = 0) =>\n    `<span class=\"star-row\">${starFilled.repeat(\n      Math.min(5, Math.max(0, Math.floor(+r || 0)))\n    )}${starEmpty.repeat(\n      5 - Math.min(5, Math.max(0, Math.floor(+r || 0)))\n    )}</span>`;\n  const getRecipeId = recipe => String(recipe?._id || recipe?.id || '');\n\n  // ingredient helpers (şema dayanıklı)\n  const pickName = (it, map) => {\n    if (!it) return '';\n    if (typeof it === 'string') return it;\n    const viaMap = map?.get?.(it.id || it._id);\n    return (\n      it.name ??\n      it.title ??\n      viaMap?.name ??\n      it.ingredient ??\n      it.product ??\n      it.description ??\n      it.item ??\n      ''\n    );\n  };\n  const pickMeasure = it => {\n    if (!it || typeof it === 'string') return '';\n    if (typeof it.measure === 'string') return it.measure;\n    const q =\n      it.quantity ?? it.qty ?? it.amount ?? it.value ?? it.count ?? it.number;\n    const u =\n      it.unit ?? it.unitShort ?? it.unitLong ?? it.measureUnit ?? it.units;\n    if (q || u) return [q, u].filter(Boolean).join(' ');\n    if (it.measure && typeof it.measure === 'object') {\n      const mq = it.measure.quantity ?? it.measure.amount ?? it.measure.value;\n      const mu = it.measure.unit ?? it.measure.unitShort ?? it.measure.units;\n      if (mq || mu) return [mq, mu].filter(Boolean).join(' ');\n    }\n    if (it.measures?.metric) {\n      const m = it.measures.metric;\n      const mq = m.amount ?? m.quantity ?? m.value;\n      const mu = m.unitShort ?? m.unit;\n      if (mq || mu) return [mq, mu].filter(Boolean).join(' ');\n    }\n    return '';\n  };\n  const normalizeIngredients = recipe => {\n    if (Array.isArray(recipe?.ingredients)) return recipe.ingredients;\n    if (typeof recipe?.ingredients === 'string') {\n      return recipe.ingredients\n        .split('\\n')\n        .map(s => s.trim())\n        .filter(Boolean)\n        .map(s => ({ name: s }));\n    }\n    if (Array.isArray(recipe?.components)) return recipe.components;\n    if (Array.isArray(recipe?.extendedIngredients))\n      return recipe.extendedIngredients;\n    return [];\n  };\n\n  // YouTube helpers\n  function extractYouTubeId(urlOrId = '') {\n    const s = String(urlOrId).trim();\n    if (!s) return '';\n    if (/^[a-zA-Z0-9_-]{11}$/.test(s)) return s;\n    const m =\n      s.match(\n        /(?:youtube\\.com\\/(?:watch\\?v=|embed\\/|v\\/)|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/\n      ) || s.match(/[?&]v=([a-zA-Z0-9_-]{11})/);\n    return m ? m[1] : '';\n  }\n  function youtubeEmbedUrl(recipe) {\n    const raw =\n      recipe?.youtube ||\n      recipe?.video ||\n      recipe?.youtubeUrl ||\n      recipe?.youtubeLink ||\n      recipe?.yt ||\n      '';\n    const id = extractYouTubeId(raw);\n    return id\n      ? `https://www.youtube.com/embed/${id}?rel=0&modestbranding=1`\n      : '';\n  }\n\n  // ESC leak guard\n  window.__pmEscHandler = window.__pmEscHandler || null;\n\n  /* ========== PUBLIC: openPopup ========== */\n  window.openPopup = async function (recipeOrId) {\n    const overlay = document.getElementById('home-filter-popup-overlay');\n    const content = document.getElementById('home-filter-popup-content');\n    if (!overlay || !content)\n      return console.error('❌ #popup-overlay/#popup-content yok.');\n\n    overlay.setAttribute('role', 'dialog');\n    overlay.setAttribute('aria-modal', 'true');\n\n    // local veri ile iskelet\n    let recipe =\n      typeof recipeOrId === 'object'\n        ? recipeOrId\n        : getFavs().find(r => getRecipeId(r) === String(recipeOrId)) || {\n            _id: recipeOrId,\n          };\n    renderSkeleton(content, recipe);\n    overlay.classList.remove('hidden');\n    document.body.style.overflow = 'hidden';\n\n    try {\n      const id = getRecipeId(recipe);\n      const [detail, map] = await Promise.all([\n        id ? getRecipeDetail(id) : Promise.resolve(null),\n        getIngredientsMap(),\n      ]);\n      recipe = { ...recipe, ...(detail || {}) };\n      renderFull(content, overlay, recipe, map);\n    } catch (err) {\n      console.error('Popup fetch error:', err);\n      content.innerHTML = errorView(err);\n      bindClose(overlay);\n    }\n  };\n\n  /* ========== PUBLIC: closePopup ========== */\n  window.closePopup = function () {\n    const overlay = document.getElementById('home-filter-popup-overlay');\n    if (!overlay) return;\n    overlay.classList.add('hidden');\n    document.body.style.overflow = '';\n    if (window.__pmEscHandler) {\n      document.removeEventListener('keydown', window.__pmEscHandler);\n      window.__pmEscHandler = null;\n    }\n  };\n\n  /* ========== Views ========== */\n  function mediaHTML(recipe) {\n    const yt = youtubeEmbedUrl(recipe);\n    if (yt) {\n      return `\n        <div class=\"video-wrapper\">\n          <iframe class=\"video-iframe\" src=\"${yt}\" title=\"Recipe video\" frameborder=\"0\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n            allowfullscreen></iframe>\n        </div>`;\n    }\n    return `<div class=\"media-frame\" style=\"background-image:url('${esc(\n      recipe?.preview || recipe?.thumb || ''\n    )}')\"></div>`;\n  }\n\n  function renderSkeleton(content, recipe) {\n    content.innerHTML = `\n      <button class=\"popup-x\" type=\"button\" aria-label=\"Close\">×</button>\n      <div class=\"media-wrapper\"><div class=\"media-frame sk-bg\"></div></div>\n      <h2 class=\"recipe-title\">${esc(recipe?.title || 'Loading...')}</h2>\n      <div class=\"meta-line sk-line\" style=\"height:16px;width:160px;\"></div>\n      <div class=\"ingredients\">\n        ${['', '', '', '', '']\n          .map(\n            () =>\n              `<div class=\"ing-row\"><span class=\"ing-name sk-line\" style=\"width:60%\"></span><span class=\"ing-measure sk-line\" style=\"width:20%\"></span></div>`\n          )\n          .join('')}\n      </div>\n      <div class=\"tags\">${['', '', '']\n        .map(\n          () =>\n            `<span class=\"tag-chip sk-line\" style=\"width:90px;height:28px;\"></span>`\n        )\n        .join('')}</div>\n      <div class=\"recipe-description sk-block\" style=\"height:90px\"></div>\n      <div class=\"popup-actions\">\n        <button class=\"btn btn-green\" disabled>…</button>\n        <button class=\"btn btn-outline\" disabled>…</button>\n      </div>`;\n    bindClose(document.getElementById('home-filter-popup-overlay'));\n  }\n\n  function renderFull(content, overlay, recipe, ingredientsMap) {\n    const timeText = recipe?.time?.minutes ?? recipe?.time ?? '';\n    const tagsHTML = (recipe?.tags || [])\n      .map(t => `<span class=\"tag-chip\">#${esc(t)}</span>`)\n      .join('');\n\n    const ingList = normalizeIngredients(recipe);\n    const ingredientsHTML = ingList\n      .map(it => {\n        const name = pickName(it, ingredientsMap);\n        const meas = pickMeasure(it);\n        return `<div class=\"ing-row\"><span class=\"ing-name\">${esc(\n          name\n        )}</span><span class=\"ing-measure\">${esc(meas)}</span></div>`;\n      })\n      .join('');\n\n    const favInitial = inFavs(getRecipeId(recipe))\n      ? 'Remove from favorite'\n      : 'Add to favorite';\n\n    content.innerHTML = `\n      <button class=\"popup-x\" type=\"button\" aria-label=\"Close\">×</button>\n\n      <div class=\"media-wrapper\">\n        ${mediaHTML(recipe)}\n      </div>\n\n      <h2 class=\"recipe-title\">${esc(recipe?.title || 'Untitled')}</h2>\n\n      <div class=\"meta-line\">\n        <span class=\"rating-val\">${(Number(recipe?.rating) || 0).toFixed(\n          1\n        )}</span>\n        ${renderStars(recipe?.rating)}\n        ${\n          timeText\n            ? `<span class=\"dot\">•</span><span class=\"cook-time\">${esc(\n                timeText\n              )} min</span>`\n            : ''\n        }\n      </div>\n\n      <div class=\"ingredients\">\n        ${\n          ingredientsHTML ||\n          `<div class=\"ing-row\"><span class=\"ing-name\">Ingredients</span><span class=\"ing-measure\">N/A</span></div>`\n        }\n      </div>\n\n      <div class=\"tags\">${tagsHTML}</div>\n\n      <div class=\"recipe-description\">\n        ${esc(recipe?.description || recipe?.instructions || '')}\n      </div>\n\n      <div class=\"popup-actions\">\n        <button class=\"btn btn-green\" id=\"pm-fav-btn\">${favInitial}</button>\n        <button class=\"btn btn-outline\" id=\"pm-rate-btn\">Give a rating</button>\n      </div>\n    `;\n\n    bindClose(overlay);\n\n    // favorites\n    content.querySelector('#pm-fav-btn').addEventListener('click', () => {\n      const list = getFavs();\n      const id = getRecipeId(recipe);\n      toggleFavorite(recipe, true);\n      if (inFavs(id)) {\n        setFavs(list.filter(r => getRecipeId(r) !== id));\n        content.querySelector('#pm-fav-btn').textContent = 'Add to favorite';\n      } else {\n        setFavs([{ ...recipe }, ...list]);\n        content.querySelector('#pm-fav-btn').textContent =\n          'Remove from favorite';\n      }\n    });\n\n    // rating modal trigger\n    content.querySelector('#pm-rate-btn').addEventListener('click', () => {\n      openRatingModal(recipe);\n    });\n  }\n\n  function errorView(err) {\n    return `\n      <button class=\"popup-x\" type=\"button\" aria-label=\"Close\" onclick=\"closePopup()\">×</button>\n      <div style=\"padding:12px\">\n        <h3 style=\"margin:8px 0;color:#b00020\">Failed to load recipe</h3>\n        <p style=\"color:#666;font-size:14px;\">${esc(\n          err?.message || 'Unknown error'\n        )}</p>\n      </div>`;\n  }\n\n  function bindClose(overlay) {\n    const x = document.querySelector('.popup-x');\n    if (x) x.onclick = () => window.closePopup();\n    overlay.onclick = e => {\n      if (e.target === overlay) window.closePopup();\n    };\n    if (window.__pmEscHandler)\n      document.removeEventListener('keydown', window.__pmEscHandler);\n    window.__pmEscHandler = ev => {\n      if (ev.key === 'Escape') window.closePopup();\n    };\n    document.addEventListener('keydown', window.__pmEscHandler);\n  }\n\n  /* ========== Rating send (diagnostic) ========== */\n  async function sendRecipeRating(recipe, value, email) {\n    const recipeId = getRecipeId(recipe);\n    if (!recipeId) throw new Error('Missing recipe id');\n\n    const url = `${API_ROOT}/recipes/${recipeId}/rating`;\n    const payload = { rate: Number(value) }; // backend 0.5 destekliyorsa böyle bırak\n    if (email) payload.email = email;\n\n    const res = await fetch(url, {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(payload),\n      mode: 'cors',\n      cache: 'no-store',\n    });\n\n    let bodyText = '';\n    try {\n      bodyText = await res.clone().text();\n    } catch {}\n    console.groupCollapsed('[rating] response');\n    console.log('URL:', url);\n    console.log('Status:', res.status, res.statusText);\n    console.log('Headers:', Object.fromEntries(res.headers.entries()));\n    console.log('Body:', bodyText);\n    console.groupEnd();\n\n    if (!res.ok) {\n      try {\n        const data = JSON.parse(bodyText || '{}');\n        throw new Error(data.message || `${res.status} ${res.statusText}`);\n      } catch {\n        throw new Error(bodyText || `${res.status} ${res.statusText}`);\n      }\n    }\n\n    try {\n      return JSON.parse(bodyText || '{}');\n    } catch {\n      return {};\n    }\n  }\n\n  /* ========== Rating mini-modal (half-stars) ========== */\n  function openRatingModal(recipe) {\n    const content = document.getElementById('home-filter-popup-content');\n    if (!content) return;\n\n    const prev = content.querySelector('.rating-overlay');\n    if (prev) prev.remove();\n\n    const tpl = document.createElement('div');\n    tpl.className = 'rating-overlay';\n    tpl.innerHTML = `\n      <div class=\"rating-card\" role=\"dialog\" aria-label=\"Rate recipe\">\n        <button class=\"rating-x\" type=\"button\" aria-label=\"Close\">×</button>\n        <h3 class=\"rating-title\">Rating</h3>\n        <div class=\"rating-row\">\n          <span class=\"rating-value\">0.0</span>\n          <div class=\"rating-stars\" aria-label=\"Stars\">\n            ${[1, 2, 3, 4, 5]\n              .map(\n                i => `\n              <div class=\"star-container\" data-star=\"${i}\">\n                <button class=\"half-btn left\"  data-val=\"${\n                  i - 1 + 0.5\n                }\" aria-label=\"${i - 0.5} stars\"></button>\n                <button class=\"half-btn right\" data-val=\"${i}\" aria-label=\"${i} stars\"></button>\n                <svg viewBox=\"0 0 24 24\" width=\"28\" height=\"28\">\n                  <defs>\n                    <linearGradient id=\"halfGradient-${i}\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n                      <stop offset=\"50%\" stop-color=\"#FFC107\"></stop>\n                      <stop offset=\"50%\" stop-color=\"#D6D6D6\"></stop>\n                    </linearGradient>\n                  </defs>\n                  <path d=\"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\" fill=\"#D6D6D6\"/>\n                </svg>\n              </div>\n            `\n              )\n              .join('')}\n          </div>\n        </div>\n\n        <label class=\"rating-label\">\n          <input type=\"email\" class=\"rating-email\" placeholder=\"Enter email\" />\n        </label>\n\n        <button class=\"btn rating-send\" disabled>Send</button>\n        <p class=\"rating-hint\"></p>\n      </div>\n    `;\n    content.appendChild(tpl);\n\n    const card = tpl.querySelector('.rating-card');\n    const xBtn = card.querySelector('.rating-x');\n    const emailI = card.querySelector('.rating-email');\n    const sendB = card.querySelector('.rating-send');\n    const starsC = card.querySelector('.rating-stars');\n    const valueL = card.querySelector('.rating-value');\n    const hint = card.querySelector('.rating-hint');\n\n    let current = 0;\n    const validEmail = (s = '') => /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(s);\n\n    const paint = n => {\n      current = n;\n      valueL.textContent = n.toFixed(1);\n      card.querySelectorAll('.star-container').forEach(cont => {\n        const starNum = Number(cont.dataset.star);\n        const path = cont.querySelector('svg path');\n        if (n >= starNum) {\n          path.setAttribute('fill', '#FFC107'); // full\n        } else if (n >= starNum - 0.5) {\n          path.setAttribute('fill', `url(#halfGradient-${starNum})`); // half\n        } else {\n          path.setAttribute('fill', '#D6D6D6'); // empty\n        }\n      });\n      sendB.disabled = !(current && validEmail(emailI.value));\n    };\n\n    starsC.addEventListener('click', e => {\n      const btn = e.target.closest('.half-btn');\n      if (!btn) return;\n      paint(Number(btn.dataset.val));\n    });\n\n    emailI.addEventListener('input', () => {\n      sendB.disabled = !(current && validEmail(emailI.value));\n    });\n\n    xBtn.onclick = () => tpl.remove();\n    tpl.addEventListener('click', e => {\n      if (e.target === tpl) tpl.remove();\n    });\n\n    sendB.addEventListener('click', async () => {\n      hint.textContent = '';\n      sendB.disabled = true;\n      try {\n        await sendRecipeRating(recipe, current, emailI.value.trim());\n        hint.textContent = 'Thanks for your rating!';\n        hint.classList.add('ok');\n        setTimeout(() => tpl.remove(), 900);\n      } catch (err) {\n        hint.textContent = String(\n          err?.message || 'Failed to send rating. Please try again.'\n        );\n        hint.classList.remove('ok');\n        sendB.disabled = false;\n      }\n    });\n  }\n})();\n"],"names":["Swiper","API_BASE","categoryListEl","allCategoriesBtn","searchInput","recipeGridEl","emptyRecipeGridEl","resetBtn","timeSelect","areaSelect","ingredientSelect","paginationEl","selectedCategory","searchQuery","selectedTime","selectedArea","selectedIngredient","currentPage","recipesPerPage","favorites","isInFavorites","id","item","saveFavoritesToLocalStorage","loadFavoritesFromLocalStorage","favs","loadCategories","categories","axios","cat","li","btn","updateCategoryActive","fetchAndRenderRecipes","err","fillTimeOptions","times","t","option","fillAreaOptions","areas","area","fillIngredientOptions","ingredients","ing","page","params","res","recipes","totalPages","renderRecipes","renderPagination","renderRating","rating","str","i","renderFavoriteIcon","getRecipeIdSafe","r","recipe","card","imageUrl","ratingValue","toggleFavorite","byPassLocalSave","favoriteButton","createBtn","text","disabled","active","className","dots","loadPopularRecipes","popularList","image","title","description","error","API_ROOT","FAV_KEY","getFavs","setFavs","list","inFavs","cache","fetchJSON","url","getIngredientsMap","map","it","name","getRecipeDetail","data","esc","s","m","starFilled","starEmpty","renderStars","getRecipeId","pickName","viaMap","_a","pickMeasure","q","u","mq","mu","normalizeIngredients","extractYouTubeId","urlOrId","youtubeEmbedUrl","raw","recipeOrId","overlay","content","renderSkeleton","detail","renderFull","errorView","bindClose","mediaHTML","yt","ingredientsMap","timeText","tagsHTML","ingredientsHTML","meas","favInitial","openRatingModal","x","ev","sendRecipeRating","value","email","recipeId","payload","bodyText","prev","tpl","xBtn","emailI","sendB","starsC","valueL","hint","current","validEmail","paint","n","cont","starNum","path","e"],"mappings":"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"}